<script setup lang="ts">
import { computed, onMounted, ref } from 'vue'
import { useVulnerabilities, useVulnerabilitiesDetails } from '@composables/useVulnerabilities'
import { formatDate } from '@/utils';

const { data, loading, error, fetchVulnerabilityDetails } = useVulnerabilitiesDetails()

const props = defineProps<{
    idVulnerability: string
}>()
onMounted(async () => {
    await fetchVulnerabilityDetails(props.idVulnerability)
})
const selectedVulnerability = computed(() => data.value)

</script>

<template>
    <div v-if="data">
        <p><strong>CVE ID:</strong> {{ selectedVulnerability.cve_id }}</p>
        <p><strong>Description:</strong> {{ selectedVulnerability.description }}</p>
        <p><strong>Publication Date:</strong> {{ formatDate(selectedVulnerability.published) }}</p>
        <p><strong>Last Modified Date:</strong> {{ formatDate(selectedVulnerability.last_modified) }}</p>
        <p><strong>Status:</strong> {{ selectedVulnerability.vuln_status }}</p>
        <p><strong>Fixed:</strong> {{ selectedVulnerability.fixed ? '✅' : '❌' }}</p>
    </div>
</template>

